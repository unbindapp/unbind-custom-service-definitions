name: "PostgreSQL Database"
description: "Standard PostgreSQL database using zalando postgres-operator"
type: "postgres-operator"
version: "1.0.0"
imports:
  - path: "../../common/s3-schema.yaml"
    as: s3Schema
  - path: "../../common/labels.yaml"
    as: labels
schema:
  properties:
    labels: 
      $ref: "#/imports/labels"
    version:
      type: "string"
      description: "PostgreSQL version"
      default: "17"
      enum: ["14", "15", "16", "17"]
    replicas:
      type: "integer"
      description: "Number of replicas"
      default: 1
      minimum: 1
      maximum: 5
    storage:
      type: "string"
      description: "Storage size"
      default: "1Gi"
    resources:
      type: "object"
      description: "Resource requirements"
      properties:
        requests:
          type: "object"
          properties:
            cpu:
              type: "string"
              description: "CPU request"
              default: "100m"
            memory:
              type: "string"
              description: "Memory request"
              default: "128Mi"
        limits:
          type: "object"
          properties:
            cpu:
              type: "string"
              description: "CPU limit"
              default: "200m"
            memory:
              type: "string"
              description: "Memory limit"
              default: "256Mi"
    s3:
      $ref: "#/imports/s3Schema"
  required:
    - replicas